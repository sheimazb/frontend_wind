<div class="mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10">
  <div class="mx-auto max-w-270">
    <!-- Breadcrumb Start -->
    <div
      class="mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"
    >
      <h2 class="text-title-md2 font-bold text-black dark:text-white">
        Create New Project
      </h2>

      <nav>
        <ol class="flex items-center gap-2">
          <li>
            <a
              class="font-medium dark:text-gray-300 cursor-pointer text-gray-700"
              (click)="onDashboardClick()"
              >Dashboard /</a
            >
          </li>
          <li class="font-medium text-purple-500 cursor-pointer">
            Add Project
          </li>
        </ol>
      </nav>
    </div>

    <!--section 3-->
    <div class="flex flex-col gap-6">
      <p class="dark:text-gray-400">
        Set up a separate project for each part of your application (for
        example, your API server and frontend client),<br />
        to quickly pinpoint which part of your application errors are coming
        from
      </p>
      <!--step 1-->
      <div class="flex items-center space-x-3">
        <div
          class="w-10 h-10 flex items-center justify-center bg-blue-500 text-white font-bold rounded-full"
        >
          1
        </div>
        <!-- Texte -->
        <span class="text-gray-900 dark:text-white font-medium">
          Choose your platform
        </span>
      </div>
      <!--technologies-->
      <div class="p-6 bg-gray-50 dark:bg-gray-900/80 rounded-lg shadow-lg">
        <!-- Grid View -->
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-4">
          <!-- Technology buttons -->
          <button
            *ngFor="let tech of ['Angular', 'React', 'Vue.js', 'Typescript', 'Node.js', 'Java', 'Spring', 'Dotnetcore']"
            (click)="selectTechnology(tech)"
            [class.selected]="selectedTechnology === tech"
            class="flex flex-col items-center justify-center p-3 rounded-lg bg-white dark:text-gray-300 dark:bg-darkbackground shadow-md hover:bg-gray-200 transition"
            [ngClass]="{'ring-2 ring-purple-500': selectedTechnology === tech}"
          >
            <ng-icon [name]="'di' + tech.replace('.', '') + 'Original'" size="30" />
            <span class="text-xs mt-1">{{tech}}</span>
          </button>
        </div>
      </div>
      <!--step 2-->
      <div class="flex items-center space-x-3">
        <div
          class="w-10 h-10 flex items-center justify-center bg-blue-500 text-white font-bold rounded-full"
        >
          2
        </div>
        <!-- Texte -->
        <span class="text-gray-900 dark:text-white font-medium"
          >Name your project and assign it a team</span
        >
      </div>
      <!--create Project-->
      <div class="p-6 bg-gray-50 dark:bg-gray-900/80 rounded-lg shadow-lg">
        <form #projectForm="ngForm" id="projectForm" (ngSubmit)="onSubmit()">

          <div class="grid grid-cols-2 gap-4 items-center">
            <div>
              <label
                  for="projectLogo"
                  class="block text-sm font-medium dark:text-gray-300 text-gray-700 mb-2"
                >
                  Project Logo <span class="text-red-500">*</span>
                </label>
                <p class="text-sm dark:text-gray-400 text-gray-500 mb-4">
                  Upload a logo that represents your project (JPG, PNG, or SVG).
                </p>
              </div>
              
              <div class="relative">
                <!-- Upload zone with preview -->
                <div 
                  class="group relative border-2 border-dashed dark:border-gray-600 border-gray-300 rounded-2xl p-8 text-center cursor-pointer hover:border-blue-500 dark:hover:border-blue-400 bg-gray-50/50 dark:bg-gray-800/30 min-h-[240px] flex items-center justify-center overflow-hidden hover:shadow-lg hover:shadow-blue-500/5"
                  (dragover)="onDragOver($event)"
                  (dragleave)="onDragLeave($event)"
                  (drop)="onDrop($event)"
                  (click)="fileInput.click()"
                >
                  <!-- Background gradient effect -->
                  <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/10 dark:to-purple-900/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                  
                  <input
                    #fileInput
                    type="file"
                    id="projectLogo"
                    name="projectLogo"
                    accept="image/*"
                    (change)="onLogoSelected($event)"
                    class="hidden"
                  />
                  
                  <!-- Show this when there's no image -->
                  <div class="space-y-4 relative z-10 transform group-hover:scale-105 transition-transform duration-300" *ngIf="!logoPreview">
                    <div class="w-16 h-16 mx-auto rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 p-0.5">
                      <div class="w-full h-full rounded-2xl bg-white dark:bg-gray-800 flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/10 dark:to-purple-900/10 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                        <ng-icon 
                          name="heroCloudArrowUp"
                          class="w-8 h-8 text-blue-500 dark:text-blue-400 relative z-10 group-hover:scale-110 transition-all duration-300 transform group-hover:-translate-y-1"
                        ></ng-icon>
                      </div>
                    </div>
                    <div>
                      <div class="text-sm font-medium text-gray-700 dark:text-gray-300">
                        <span class="text-blue-500 dark:text-blue-400">Click to upload</span> or drag and drop
                      </div>
                      <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center justify-center gap-1">
                        <ng-icon 
                          name="heroPhoto" 
                          class="w-4 h-4"
                        ></ng-icon>
                        SVG, PNG, JPG (max. 2MB)
                      </p>
                    </div>
                  </div>

                  <!-- Show this when there's an image -->
                  <div *ngIf="logoPreview" class="relative z-10 w-full h-full flex flex-col items-center justify-center gap-6">
                    <div class="relative group/image">
                      <div class="absolute -inset-2 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl opacity-20 group-hover/image:opacity-30 transition-opacity duration-300"></div>
                      <img [src]="logoPreview" 
                           alt="Logo preview" 
                           class="relative w-40 h-40 object-contain rounded-xl bg-white dark:bg-gray-800 p-4 shadow-lg"
                      >
                    </div>
                    <!-- Remove button overlay -->
                    <button 
                      type="button"
                      (click)="removeLogo(); $event.stopPropagation()"
                      class="relative inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg 
                             text-red-600 dark:text-red-400 
                             bg-white dark:bg-gray-800
                             shadow-lg shadow-red-500/10
                             hover:bg-red-50 dark:hover:bg-red-900/20 
                             border border-red-200/50 dark:border-red-800/50
                             transition-all duration-300
                             hover:shadow-red-500/20
                             group"
                    >
                      <ng-icon 
                        name="heroTrash" 
                        class="w-4 h-4 transition-transform duration-300 group-hover:scale-110"
                      ></ng-icon>
                      Remove logo
                    </button>
                  </div>
                </div>
              </div>
          </div>
          <!-- Name Field -->
          <div class="grid grid-cols-2 items-center gap-4">
            <div>
              <label
                for="name"
                class="block text-sm font-medium dark:text-gray-300 text-gray-700"
              >
                Name <span class="text-red-500">*</span>
              </label>
              <p class="text-sm dark:text-gray-400 text-gray-500">
                A name for this project
              </p>
            </div>
            <input
              type="text"
              id="name"
              name="name"
              [(ngModel)]="project.name"
              required
              placeholder="Enter project name"
              class="block w-full px-3 py-2 border dark:border-gray-700 dark:bg-gray-700 dark:text-gray-300 border-gray-300 bg-gray-100 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
            />
          </div>

          <!-- Description Field -->
          <div class="grid mt-3 grid-cols-2 items-center gap-4">
            <div>
              <label
                for="description"
                class="block text-sm font-medium dark:text-gray-300 text-gray-700"
              >
                Description <span class="text-red-500">*</span>
              </label>
              <p class="text-sm dark:text-gray-400 text-gray-500">
                A description for this project
              </p>
            </div>
            <textarea
              id="description"
              name="description"
              [(ngModel)]="project.description"
              required
              placeholder="Enter project description"
              class="block w-full px-3 py-2 border dark:border-gray-700 dark:bg-gray-700 dark:text-gray-300 border-gray-300 bg-gray-100 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
            ></textarea>
          </div>

            <!-- project tag Field -->
            <div class="grid mt-3 grid-cols-2 items-start gap-4">
              <div>
                <label
                  for="projectTag"
                  class="block text-sm font-medium dark:text-gray-300 text-gray-700"
                >
                  Project Tag <span class="text-red-500">*</span>
                </label>
                <p class="text-sm dark:text-gray-400 text-gray-500">
                  Add a unique identifier for your project. Choose carefully as this needs to be unique.
                </p>
              </div>
              <div class="relative">
                <div class="relative">
                  <input
                    type="text"
                    id="projectTag"
                    name="projectTag"
                    [(ngModel)]="project.projectTag"
                    (input)="onTagInput($event)"
                    required
                    class="block w-full px-3 py-2 border dark:border-gray-700 dark:bg-gray-700 dark:text-gray-300 border-gray-300 bg-gray-100 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                    [ngClass]="getTagStatusClasses()"
                    placeholder="Enter project tag"
                  />
                  
                  <!-- Status Indicators -->
                  <div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center">
                    <!-- Loading Spinner -->
                    <div *ngIf="isCheckingTag" 
                         class="animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent">
                    </div>
                    
                    <!-- Available Tag Indicator -->
                    <ng-icon *ngIf="!isCheckingTag && isTagAvailable === true"
                             name="heroCheckCircle"
                             class="w-5 h-5 text-green-500 dark:text-green-400"
                             title="Tag is available">
                    </ng-icon>
                    
                    <!-- Taken Tag Indicator -->
                    <ng-icon *ngIf="!isCheckingTag && isTagAvailable === false"
                             name="heroXCircle"
                             class="w-5 h-5 text-red-500 dark:text-red-400"
                             title="Tag is already taken">
                    </ng-icon>
                  </div>
                </div>

                <!-- Tag Suggestions with improved styling -->
                <div *ngIf="tagSuggestions.length > 0" 
                     class="absolute z-10 mt-1 w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 transition-all duration-200 ease-in-out">
                  <div class="p-2">
                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2 flex items-center gap-2">
                      <ng-icon name="heroXCircle" class="w-4 h-4 text-red-500"></ng-icon>
                      Current tag is taken. Try these alternatives:
                    </p>
                    <div class="flex flex-col gap-1">
                      <button 
                        *ngFor="let suggestion of tagSuggestions"
                        (click)="applyTagSuggestion(suggestion)"
                        class="text-left px-3 py-2 text-sm rounded-md
                               hover:bg-blue-50 dark:hover:bg-blue-900/50 
                               text-blue-700 dark:text-blue-300
                               flex items-center gap-2 group transition-all duration-200
                               border border-transparent hover:border-blue-200 dark:hover:border-blue-800">
                        <ng-icon name="heroCheckCircle" 
                                class="w-4 h-4 text-green-500 dark:text-green-400">
                        </ng-icon>
                        <span class="flex-1">{{ suggestion }}</span>
                        <span class="text-xs text-gray-400 dark:text-gray-500 group-hover:text-blue-500 dark:group-hover:text-blue-400">
                          Click to use
                        </span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          
          <!-- Repository Link Field -->
          <div class="grid mt-3 grid-cols-2 items-center gap-4">
            <div>
              <label
                for="repositoryLink"
                class="block text-sm font-medium dark:text-gray-300 text-gray-700"
              >
                Repository Link <span class="text-red-500">*</span>
              </label>
              <p class="text-sm dark:text-gray-400 text-gray-500">
                Add a link to your project repository
              </p>
            </div>
            <input
              type="url"
              id="repositoryLink"
              name="repositoryLink"
              [(ngModel)]="project.repositoryLink"
              required
              placeholder="Enter repository link"
              class="block w-full px-3 py-2 border dark:border-gray-700 dark:bg-gray-700 dark:text-gray-300 border-gray-300 bg-gray-100 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
            />
          </div>

          <!-- Deadline Date Field -->
          <div class="grid mt-3 grid-cols-2 items-center gap-4">
            <div>
              <label
                for="deadlineDate"
                class="block text-sm font-medium dark:text-gray-300 text-gray-700"
              >
                Deadline Date <span class="text-red-500">*</span>
              </label>
              <p class="text-sm dark:text-gray-400 text-gray-500">
                Deadline for the project
              </p>
            </div>
            <input
              type="date"
              id="deadlineDate"
              name="deadlineDate"
              [(ngModel)]="project.deadlineDate"
              required
              class="block w-full px-3 py-2 border dark:border-gray-700 dark:bg-gray-700 dark:text-gray-300 border-gray-300 bg-gray-100 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
            />
          </div>

        
        </form>
      </div>
      <!--step 3-->
      <div class="flex items-center space-x-3">
        <div
          class="w-10 h-10 flex items-center justify-center bg-blue-500 text-white font-bold rounded-full"
        >
          3
        </div>
        <!-- Texte -->
        <span class="text-gray-900 dark:text-white font-medium"
          >Ready to create</span
        >
      </div>
    </div>
    <div
      class="p-6 flex flex-row items-center justify-between mt-6 bg-gray-50 dark:bg-gray-900/80 rounded-lg shadow-lg"
    >
      <p class="dark:text-gray-400">
        now you are able to create your project! <br />
        <b>Congratulations! 🎉</b>
      </p>
      <button
        type="submit"
        form="projectForm"
        [disabled]="isLoading"
        class="h-fit border rounded-md flex justify-center items-center gap-2 p-2
         dark:text-white
         text-white
         bg-green-500
         hover:bg-green-600
         border-green-500
          w-full sm:w-auto min-w-[150px]"
      >
        <span class="text-sm md:text-base">{{ isLoading ? 'Creating...' : 'Create Project' }}</span>
        <mat-icon *ngIf="!isLoading">keyboard_arrow_right</mat-icon>
        <mat-icon *ngIf="isLoading" class="animate-spin">refresh</mat-icon>
          </button>
        </div>
    <div></div>
  </div>
</div>
